<html>
    <head>
        <title>Stranka</title>
        <style>
            .zoznam {
                color: red;
            }
        </style>
        <script>
        window.addEventListener("load", function() {
            console.log("loaded.");

            // ajax
            var result = ["todo1", "todo2", "todo3"];

            var ul = document.getElementsByTagName("ul")[0];
            result.forEach(function(todo) {
                console.log(todo);

                pridajLi(todo);
            });

            function pridajLi(text) {
                var ul = document.getElementsByTagName("ul")[0];

                console.log(ul);

                var li = document.createElement("li");
                li.innerHTML = text;
                ul.appendChild(li);

                var vymaz = document.createElement("button");
                vymaz.innerHTML = "vymaz";
                li.appendChild(vymaz);

                vymaz.addEventListener("click", function(e) {
                    var clickedButton  = e.target;
                    console.log(clickedButton);

                    // parent.removeChild(child);
                    var li = clickedButton.parentNode;
                    var ul = li.parentNode;

                    ul.removeChild(li);
                });
            }

            var button = document.getElementById("vloz");
            console.log(button);

            button.addEventListener("click", function() {
                var todoElement = document.getElementById("text");
                
                var todoText = "";
                if(todoElement) {
                    console.log(todoElement);
                    todoText = todoElement.value;
                }

                pridajLi(todoText);
                todoElement.value = "";
            });

            document.getElementById("save").addEventListener("click", function() {
                var ul = document.getElementsByClassName("zoznam")[0];

                var liElements = ul.children;
                var todos = [];
                for(var i = 0; i < liElements.length; i++) {
                   todos.push(liElements[i].firstChild.textContent);
                }

                console.log(todos);
                // send todos via ajax
            });

        });

        </script>
    </head>
    <body>
        <script>console.log("html body");</script>
        <h1>ToDo List</h1>

        <input id="text" type="text" value="init todo" />
        <button id="vloz">Vloz</button>

        <ul class="zoznam">

        </ul>

        <button id="save">Uloz</button>
    </body>
</html>